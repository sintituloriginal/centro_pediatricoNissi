<!DOCTYPE html>
<html>

  {% include head.html %}


    <body id="page-top" class="index">

    {% include header.html %}
    {% include services.html %}
    {% include portfolio_grid.html %}
    {% include about.html %}
    {% include team.html %}
    {% include contact.html %}
    {% include footer.html %}
    {% include modals.html %}
    {% include js.html %}


    <script async defer src="https://www.instagram.com/embed.js"></script>
<script>
function mountInstagram(el, url){
  el.innerHTML = `
    <div class="ig-embed-holder" style="position:absolute; inset:0;">
      <blockquote class="instagram-media"
                  data-instgrm-permalink="${url}"
                  data-instgrm-version="14"
                  style="margin:0 auto; max-width:100%; width:100%;"></blockquote>
    </div>`;
  if (window.instgrm && instgrm.Embeds) instgrm.Embeds.process();
}

document.addEventListener('click', function(e){
  const btn = e.target.closest('.news-play');
  if(!btn) return;

  const media = btn.closest('.ig-media');
  if(!media) return;

  const url = (media.dataset.ig || '').replace(/\/?$/, '/'); // asegura slash final

  // Cierra otros embeds (vuelve a su poster)
  document.querySelectorAll('.ig-media.ig-loaded').forEach(el=>{
    if(el === media) return;
    const poster = el.dataset.poster;
    el.classList.remove('ig-loaded');
    el.innerHTML = `
      <img class="news-thumb" src="${poster}" alt="">
      <button class="news-play" type="button" aria-label="Reproducir"><i class="fa fa-play"></i></button>
    `;
  });

  media.classList.add('ig-loaded');
  mountInstagram(media, url);
});
</script>

    </body>
</html>